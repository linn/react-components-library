import e from"react";import r from"@material-ui/core/Button";import t from"prop-types";import{_ as a}from"./chunk-24be6bba.js";import"@material-ui/core/Typography";import l from"@material-ui/core/Link";import{withStyles as o}from"@material-ui/core/styles";import i from"@material-ui/core/Table";import s from"@material-ui/core/TableBody";import n from"@material-ui/core/TableCell";import m from"@material-ui/core/TableHead";import c from"@material-ui/core/TableRow";import u from"@material-ui/core/Paper";import p from"numeral";import d from"@material-ui/core/Modal";import{Link as h}from"react-router-dom";import f from"@material-ui/styles/makeStyles";import y from"./Title.js";import"@material-ui/core/Card";import"@material-ui/icons/Error";import"@material-ui/core/styles/withStyles";import"@material-ui/core/styles/MuiThemeProvider";import"@material-ui/core/colors/red";import"./errorTheme.js";import"@material-ui/core/colors/pink";import"./linnTheme.js";import E from"./ErrorCard.js";var w=f(function(e){return{link:{textDecoration:"none",color:e.palette.primary.main,padding:0,"&:hover":{cursor:"pointer",textDecoration:"underline",background:"transparent"}}}});function T(t){var a=t.hasExternalLinks,o=t.text,i=t.href,s=w();return a?e.createElement("a",{style:{textDecoration:"none"},href:i},e.createElement(r,{size:"small",className:s.link},o)):e.createElement(l,{className:s.link,component:h,to:i}," ",o," ")}var k=function(e,r,t,a){var l;return l=a&&"0"!==a?".".concat(Array(a+1).join("0")):"",e||0===e?(r||"")+p(e).format("0,0".concat(l))+(t||""):null},x=function(e,r){var t,a;return e&&e.hasOwnProperty("displayString")?(t=e.displayString,e.drillDowns.length>0&&(a=e.drillDowns[0].href)):t=e,a?T({hasExternalLinks:r,text:t,href:a}):t},b=function(r,t,a,l,o){return l?e.createElement("strong",null,"Error"):t?(i=r&&r.displayString?r.displayString:r,a?e.createElement("h5",null,"".concat(i," (loading)")):e.createElement("div",{className:"row"},e.createElement("div",{className:"col-xs-11"},e.createElement("h5",null,x(r))),o?e.createElement("div",{className:"col-xs-1"},e.createElement(d,{"aria-labelledby":"simple-modal-title","aria-describedby":"simple-modal-description"},o)):"")):"";var i},g=function(e,r){var t;if(e&&(e.displayValue||0===e.displayValue))if(e.drillDowns&&e.drillDowns.length>0){t=k(e.displayValue,e.prefix,e.suffix,e.decimalPlaces);var a=e.displayValue;t=T({hasExternalLinks:r,href:e.drillDowns[0].href,text:a})}else t=k(e.displayValue,e.prefix,e.suffix,e.decimalPlaces);else t=null;return t},v=t.shape({rowHeader:t.string.isRequired,columnHeaders:t.arrayOf(t.string).isRequired,varianceColumns:t.arrayOf(t.number).isRequired}),D=t.shape({rowTitle:t.object.isRequired,rowSortOrder:t.number,values:t.arrayOf(t.object).isRequired}),R=t.shape({title:t.object,resultType:t.string,reportValueType:t.string,headers:v,results:t.arrayOf(D).isRequired,totals:D}),L=function(){return{root:{width:"100%",overflow:"auto",textAlign:"center"}}},j=function(r){var t=r.reportData,a=r.classes,l=r.title,o=r.showTitle,p=r.showTotals,d=r.hasExternalLinks,h=r.showRowTitles;return e.createElement(u,{className:a.root},e.createElement(y,{text:b(l,o,!t,t&&t.error,t?t.reportHelpText:"")}),e.createElement("div",{style:{backgroundColor:"white"}},e.createElement(i,{className:L.table,size:"small"},e.createElement(m,{key:"headers"},e.createElement(c,null,h?e.createElement(n,null):null,t.headers.columnHeaders.map(function(r,t){return e.createElement(n,{key:t},r)}))),e.createElement(s,null,t.results.map(function(r,t){return e.createElement(c,{key:t},h?e.createElement(n,{className:"single-line-field","data-tip":r.rowTitle.displayString},x(r.rowTitle,d)):null,r.values.map(function(r,t){return e.createElement(n,{key:t},g(r,d),function(e,r){var t;e&&e.textDisplayValue?t=e.drillDowns&&e.drillDowns.length>0?T({hasExternalLinks:r,text:e.textDisplayValue,href:e.drillDowns[0].href}):e.textDisplayValue:t=null;return t}(r,d))}))}),!!p&&e.createElement(c,{key:"totals"},h?e.createElement(n,null,t.totals.rowTitle.displayString):null,t.totals.values.map(function(r,t){return e.createElement(n,{key:t},g(r,d))}))))))};function q(r){var t=r.placeholderRows,l=r.placeholderColumns,o=r.reportData,m=r.hasExternalLinks,p=r.classes,d=r.title,h=r.showTitle,f=r.showTotals,y=r.showRowTitles;return o?o.message?e.createElement(E,{errorMessage:o.message}):j({reportData:o,hasExternalLinks:m,classes:p,title:d,showRowTitles:y,showTitle:h,showTotals:f}):e.createElement(u,{className:p.root},e.createElement(i,null,e.createElement(s,null,a(Array(t).keys()).map(function(r){return e.createElement(c,{key:r},a(Array(l).keys()).map(function(r){return e.createElement(n,{key:r})}))}))))}j.propTypes={hasExternalLinks:t.bool,reportData:R,classes:t.shape({}).isRequired,title:t.oneOfType([t.string,t.shape({})]),showTitle:t.bool,showTotals:t.bool,showRowTitles:t.bool},j.defaultProps={reportData:null,title:null,showTitle:!0,showTotals:!0,showRowTitles:!0,hasExternalLinks:!1},q.propTypes={hasExternalLinks:t.bool,placeholderRows:t.number.isRequired,placeholderColumns:t.number.isRequired,reportData:t.shape({})},q.defaultProps={reportData:null,placeholderRows:5,placeholderColumns:6,hasExternalLinks:!1};var N=o(L)(q);export default N;
