"use strict";function _interopDefault(e){return e&&"object"==typeof e&&"default"in e?e.default:e}Object.defineProperty(exports,"__esModule",{value:!0});var Tooltip=_interopDefault(require("@material-ui/core/Tooltip")),SvgIcon=_interopDefault(require("@material-ui/core/SvgIcon")),TextField=_interopDefault(require("@material-ui/core/TextField")),Button=_interopDefault(require("@material-ui/core/Button")),Table=_interopDefault(require("@material-ui/core/Table")),TableBody=_interopDefault(require("@material-ui/core/TableBody")),TableCell=_interopDefault(require("@material-ui/core/TableCell")),TableHead=_interopDefault(require("@material-ui/core/TableHead")),TableRow=_interopDefault(require("@material-ui/core/TableRow")),Paper=_interopDefault(require("@material-ui/core/Paper")),classnames=_interopDefault(require("classnames")),Modal=_interopDefault(require("@material-ui/core/Modal")),numeral=_interopDefault(require("numeral")),reactRouterDom=require("react-router-dom"),PropTypes=_interopDefault(require("prop-types")),MuiThemeProvider=_interopDefault(require("@material-ui/core/styles/MuiThemeProvider")),icons=require("@material-ui/icons"),red=_interopDefault(require("@material-ui/core/colors/red")),React=require("react"),React__default=_interopDefault(React),core=require("@material-ui/core"),styles=require("@material-ui/core/styles");function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function _createClass(e,t,a){return t&&_defineProperties(e.prototype,t),a&&_defineProperties(e,a),e}function _defineProperty(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function _objectSpread(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{},r=Object.keys(a);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(a).filter(function(e){return Object.getOwnPropertyDescriptor(a,e).enumerable}))),r.forEach(function(e){_defineProperty(t,e,a[e])})}return t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&_setPrototypeOf(e,t)}function _getPrototypeOf(e){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function _setPrototypeOf(e,t){return(_setPrototypeOf=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function _assertThisInitialized(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _possibleConstructorReturn(e,t){return!t||"object"!=typeof t&&"function"!=typeof t?_assertThisInitialized(e):t}function _toConsumableArray(e){return _arrayWithoutHoles(e)||_iterableToArray(e)||_nonIterableSpread()}function _arrayWithoutHoles(e){if(Array.isArray(e)){for(var t=0,a=new Array(e.length);t<e.length;t++)a[t]=e[t];return a}}function _iterableToArray(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance")}var styles$1=function(e){return{pullLeft:{float:"left"}}},BackButton=function(e){function t(){return _classCallCheck(this,t),_possibleConstructorReturn(this,_getPrototypeOf(t).apply(this,arguments))}return _inherits(t,React.Component),_createClass(t,[{key:"render",value:function(){var e=this.props,t=e.backClick,a=e.classes;return React__default.createElement("div",{className:a.pullLeft},React__default.createElement(Button,{id:"back-button",onClick:function(){return t()}},"Back"))}}]),t}(),BackButton$1=styles.withStyles(styles$1)(BackButton),styles$2=function(e){return{}},ExportButton=function(e){function t(){return _classCallCheck(this,t),_possibleConstructorReturn(this,_getPrototypeOf(t).apply(this,arguments))}return _inherits(t,React.Component),_createClass(t,[{key:"render",value:function(){var e=this.props,t=e.classes,a=e.href;return React__default.createElement("div",{className:t.pullLeft},React__default.createElement(Tooltip,{title:"Download report as CSV file",placement:"top-end"},React__default.createElement(Button,{variant:"contained",href:a},"Export",React__default.createElement(SvgIcon,null,React__default.createElement("path",{xmlns:"http://www.w3.org/2000/svg",d:"M19 12v7H5v-7H3v7c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2v-7h-2zm-6 .67l2.59-2.58L17 11.5l-5 5-5-5 1.41-1.41L11 12.67V3h2z"})))))}}]),t}(),ExportButton$1=styles.withStyles(styles$2)(ExportButton),Breadcrumbs=function(e){function t(){return _classCallCheck(this,t),_possibleConstructorReturn(this,_getPrototypeOf(t).apply(this,arguments))}return _inherits(t,React.Component),_createClass(t,[{key:"render",value:function(){var e=this.props,t=e.location,o=e.history,a=e.rootPathLength,s=void 0===a?2:a,r=t.pathname.split("/").reduce(function(e,t,a,r){var l=r.slice(0,a+1),n=l.join("/")||"/";return _toConsumableArray(e).concat([{key:a,caption:t||"Home",href:n,onClick:function(e){return t=e,void(l.length>s&&(t.preventDefault(),o.push(n)));var t}}])},[]);return React__default.createElement("div",null,r.map(function(e){return React__default.createElement("span",null,React__default.createElement(Button,{variant:"contained"},React__default.createElement(reactRouterDom.Link,{to:e.href}," ",e.caption,"  ")," ")," ",React__default.createElement(icons.ChevronRight,null))}))}}]),t}(),styles$3=function(e){return{pullRight:{float:"right"}}},SaveCancelButtons=function(e){function t(){return _classCallCheck(this,t),_possibleConstructorReturn(this,_getPrototypeOf(t).apply(this,arguments))}return _inherits(t,React.Component),_createClass(t,[{key:"render",value:function(){var e,t=this.props,a=t.saveClick,r=t.cancelClick,l=t.classes,n=t.disabled;return React__default.createElement("div",{className:l.pullRight},React__default.createElement(Button,{id:"cancel-button",onClick:function(){return r()},disabled:n},"Cancel"),React__default.createElement(Button,(_defineProperty(e={id:"save-button",variant:"outlined"},"variant","contained"),_defineProperty(e,"color","primary"),_defineProperty(e,"onClick",function(){return a()}),_defineProperty(e,"disabled",n),e),"Save"))}}]),t}(),SaveCancelButtons$1=styles.withStyles(styles$3)(SaveCancelButtons),styles$4={textField:{width:"100%",margin:"0 auto"},label:{fontSize:16,color:"#afaeae"},input:{fontSize:16,fontWeight:"bold"}},FormField=function(e){function a(e){var t;return _classCallCheck(this,a),(t=_possibleConstructorReturn(this,_getPrototypeOf(a).call(this,e))).state={value:t.props.value},t}return _inherits(a,React.Component),_createClass(a,[{key:"onChange",value:function(e){var t=this.props,a=t.onChange,r=t.propertyName;this.state.value=e.target.value,a&&a(r,e.target.value)}},{key:"render",value:function(){var t=this,e=this.props,a=e.config,r=e.value,l=e.classes;return React__default.createElement("div",null,React__default.createElement(TextField,{label:a.label,id:"margin-normal",type:a.type,value:r,disabled:a.disabled,className:l.textField,InputProps:{className:l.input,shrink:!0},InputLabelProps:{className:l.label,shrink:!0},onChange:function(e){return t.onChange(e)},helperText:a.required?"Required":""}))}}]),a}(),FormField$1=styles.withStyles(styles$4)(FormField),format=function(e,t,a,r){var l;return l=r&&"0"!==r?"."+Array(r+1).join("0"):"",e||0===e?(t||"")+numeral(e).format("0,0".concat(l))+(a||""):null},formatTitle=function(e,t,a,r,l){return r?React__default.createElement("strong",null,"Error"):!!t&&(n=e&&e.displayString?e.displayString:e,a?React__default.createElement("h5",null,"".concat(n," (loading)")):React__default.createElement("div",{className:"row"},React__default.createElement("div",{className:"col-xs-11"},React__default.createElement("h5",null,setDrilldown(e))),l?React__default.createElement("div",{className:"col-xs-1"},React__default.createElement(Modal,{"aria-labelledby":"simple-modal-title","aria-describedby":"simple-modal-description"},l)):""));var n},setDrilldown=function(e){var t,a;return e&&e.hasOwnProperty("displayString")?(t=e.displayString,0<e.drillDowns.length&&(a=e.drillDowns[0].href)):t=e,a?React__default.createElement(reactRouterDom.Link,{to:a},t):t},setValueDrilldown=function(e){return e&&(e.displayValue||0===e.displayValue)?e.drillDowns&&0<e.drillDowns.length?React__default.createElement(reactRouterDom.Link,{className:"link-value",tof:e.drillDowns[0].href},format(e.displayValue,e.prefix,e.suffix,e.decimalPlaces)):format(e.displayValue,e.prefix,e.suffix,e.decimalPlaces):null},setTextValueDrilldown=function(e){return e&&e.textDisplayValue?e.drillDowns&&0<e.drillDowns.length?React__default.createElement(reactRouterDom.Link,{className:"link-value",to:e.drillDowns[0].href},e.textDisplayValue):e.textDisplayValue:null},displayError=function(e){return React__default.createElement("h5",{className:"error-message"},e)},headersType=PropTypes.shape({rowHeader:PropTypes.string.isRequired,columnHeaders:PropTypes.arrayOf(PropTypes.string).isRequired,varianceColumns:PropTypes.arrayOf(PropTypes.number).isRequired}),resultDetailsType=PropTypes.shape({rowTitle:PropTypes.object.isRequired,rowSortOrder:PropTypes.number,values:PropTypes.arrayOf(PropTypes.object).isRequired}),reportResultType=PropTypes.shape({title:PropTypes.object,resultType:PropTypes.string,reportValueType:PropTypes.string,headers:headersType,results:PropTypes.arrayOf(resultDetailsType).isRequired,totals:resultDetailsType}),styles$5=function(e){return{root:{width:"100%",margin:3*e.spacing.unit,overflowX:"auto"},table:{margin:3*e.spacing.unit}}},theme=styles.createMuiTheme({overrides:{MuiTableCell:{body:{fontSize:"12px"},head:{fontSize:"14px"}}}}),getCellClassName=function(e,t,a,r){var l=4<arguments.length&&void 0!==arguments[4]?arguments[4]:[];return classnames(l,{"variance-positive":e&&0<a},{"variance-negative":e&&a<0},{"success total":t},{"text-right":!r})},getTableClassNames=function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:[];return classnames(t,"table","table-condensed","table-bordered","small",{"table-striped":!e})},getTableRowClassNames=function(e,t){var a=2<arguments.length&&void 0!==arguments[2]?arguments[2]:[];return classnames(a,{"subtotal-row active":t&&"Subtotal"===e},{success:"Total"===e})},getTableHeaderClassNames=function(e,t,a){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:[];return classnames(r,{"col-xs-1":t&&e},{"col-xs-2":t&&!e},{"text-right":!a})},Placeholder=function(e){var t=e.rows,a=e.columns;return React__default.createElement(Table,{className:"table placeholder table-placeholder"},React__default.createElement(TableBody,null,_toConsumableArray(Array(t).keys()).map(function(e){return React__default.createElement(TableRow,{key:e},_toConsumableArray(Array(a).keys()).map(function(e){return React__default.createElement(TableCell,{key:e})}))})))},ReportTable=function(e){var r=e.reportData,t=e.title,a=e.showTitle,l=void 0===a||a,n=e.showTotals,o=void 0===n||n,s=e.placeholderRows,i=void 0===s?5:s,c=e.placeholderColumns,u=void 0===c?6:c,p=e.containsSubtotals,d=void 0!==p&&p,f=e.fixColumnWidths,m=void 0!==f&&f,y=e.showRowTitles,_=void 0===y||y;return React__default.createElement(MuiThemeProvider,{theme:theme},React__default.createElement(Paper,{className:styles$5.root},formatTitle(t,l,!r,r&&r.error,r?r.reportHelpText:null),r?r.error?displayError(r.message):React__default.createElement("div",{style:{backgroundColor:"white"}},React__default.createElement(Table,{className:getTableClassNames(d)},React__default.createElement(TableHead,{key:"headers"},React__default.createElement(TableRow,null,_?React__default.createElement(TableCell,{className:getTableHeaderClassNames(!1,m,"")}):null,r.headers.columnHeaders.map(function(e,t){return React__default.createElement(TableCell,{className:getTableHeaderClassNames(!0,m,r.headers.textColumns.includes(t),[]),key:t},e)}))),React__default.createElement(TableBody,null,r.results.map(function(e,a){return React__default.createElement(TableRow,{className:getTableRowClassNames(e.rowType,d,["report-data-row"]),key:a},_?React__default.createElement(TableCell,{className:"single-line-field","data-tip":e.rowTitle.displayString},setDrilldown(e.rowTitle)):null,e.values.map(function(e,t){return React__default.createElement(TableCell,{className:getCellClassName(r.headers.varianceColumns.includes(t)||r.headers.varianceRows.includes(a),r.headers.totalColumns.includes(t),e.displayValue,e.textDisplayValue,[]),key:t},setValueDrilldown(e),setTextValueDrilldown(e))}))}),!!o&&React__default.createElement(TableRow,{className:getTableRowClassNames(r.totals.rowType,d,["report-totals"]),key:"totals"},_?React__default.createElement(TableCell,null,r.totals.rowTitle.displayString):null,r.totals.values.map(function(e,t){return React__default.createElement(TableCell,{className:getCellClassName(r.headers.varianceColumns.includes(t),r.headers.totalColumns.includes(t),e.displayValue,e.textDisplayValue,["total"]),key:t},setValueDrilldown(e))}))))):React__default.createElement(Placeholder,{rows:i,columns:u})))};Table.propTypes={reportData:reportResultType,title:PropTypes.object,showTitle:PropTypes.bool,showTotals:PropTypes.bool,placeholderRows:PropTypes.number,placeholderColumns:PropTypes.number,containsSubtotals:PropTypes.bool,fixColumnWidths:PropTypes.bool,showRowTitles:PropTypes.bool};var ReportTable$1=styles.withStyles(styles$5)(ReportTable),styles$6={outer:{textAlign:"center",margin:"20px",height:"40px"},loading:{backgroundColor:"#88cbf0",height:"100%",width:"6px",animation:"stretchdelay 1.2s infinite ease-in-out",display:"inline-block"}},Loading=function(e){function t(){return _classCallCheck(this,t),_possibleConstructorReturn(this,_getPrototypeOf(t).apply(this,arguments))}return _inherits(t,React.Component),_createClass(t,[{key:"render",value:function(){var e=document.styleSheets[0];return e.insertRule("@keyframes stretchdelay {\n            0%, 40%, 100% {\n                transform: scaleY(0.2);\n                -webkit-transform: scaleY(0.2);\n            }\n        \n            20% {\n                transform: scaleY(1.0);\n                -webkit-transform: scaleY(1.0);\n            }\n        }",e.cssRules.length),React__default.createElement("div",{style:styles$6.outer},React__default.createElement("div",{style:_objectSpread({},styles$6.loading)})," ",React__default.createElement("div",{style:_objectSpread({},styles$6.loading,{animationDelay:"-1.0s"})})," ",React__default.createElement("div",{style:_objectSpread({},styles$6.loading,{animationDelay:"-0.9s"})})," ",React__default.createElement("div",{style:_objectSpread({},styles$6.loading,{animationDelay:"-0.8s"})})," ",React__default.createElement("div",{style:_objectSpread({},styles$6.loading,{animationDelay:"-0.7s"})})," ",React__default.createElement("div",{style:_objectSpread({},styles$6.loading,{animationDelay:"-0.6s"})}))}}]),t}(),styles$7={outer:{textAlign:"center",height:"32px",paddingRight:"10px",display:"inline-block"},loading:{backgroundColor:"#88cbf0",height:"100%",width:"6px",animation:"stretchdelay 1.2s infinite ease-in-out",display:"inline-block"}},MiniLoading=function(e){function t(){return _classCallCheck(this,t),_possibleConstructorReturn(this,_getPrototypeOf(t).apply(this,arguments))}return _inherits(t,React.Component),_createClass(t,[{key:"render",value:function(){return React__default.createElement("div",{style:styles$7.outer},React__default.createElement("div",{style:_objectSpread({},styles$7.loading)})," ",React__default.createElement("div",{style:_objectSpread({},styles$7.loading,{animationDelay:"-1.0s"})})," ",React__default.createElement("div",{style:_objectSpread({},styles$7.loading,{animationDelay:"-0.9s"})})," ")}}]),t}(),styles$8=function(e){return{root:{margin:e.spacing.unit,minWidth:120,marginBottom:"20px",width:"100%"},typography:{fontSize:16}}},Dropdown=function(e){var t=e.classes,a=e.label,r=e.items,l=void 0===r?[]:r,n=e.onChange,o=e.value;return React__default.createElement(core.FormControl,{className:"".concat(t.root," ").concat(t.typography)},React__default.createElement(core.InputLabel,{className:t.typography},a),React__default.createElement(core.Select,{className:t.typography,value:o,onChange:n},l&&l.map(function(e){return React__default.createElement(core.MenuItem,{key:e,className:t.typography,value:e},e)})))},Dropdown$1=styles.withStyles(styles$8)(Dropdown),errorTheme=styles.createMuiTheme({palette:{background:{paper:red[100]}},typography:{useNextVariants:!0}}),styles$9=function(){return{root:{display:"flex",justifyContent:"center",width:"50%",margin:"auto",padding:10},icon:{marginRight:5},typography:{fontSize:16}}},ErrorCard=function(e){var t=e.classes,a=e.errorMessage;return React__default.createElement(styles.MuiThemeProvider,{theme:errorTheme},React__default.createElement(core.Card,{className:t.root},React__default.createElement(icons.Error,{color:"error",className:t.icon}),React__default.createElement(core.Typography,{align:"center",className:t.typography},a)))},ErrorCard$1=styles.withStyles(styles$9)(ErrorCard),styles$a={root:{width:"100%",fontSize:14}},CheckboxWithLabel=function(e){var t=e.classes,a=e.checked,r=e.color,l=void 0===r?"primary":r,n=e.label,o=e.onChange;return React__default.createElement(core.FormControlLabel,{label:n,classes:{label:"".concat(t.root)},control:React__default.createElement(core.Checkbox,{checked:a,onChange:o,color:l})})},CheckboxWithLabel$1=styles.withStyles(styles$a)(CheckboxWithLabel);exports.Breadcrumbs=Breadcrumbs,exports.BackButton=BackButton$1,exports.CheckboxWithLabel=CheckboxWithLabel$1,exports.Dropdown=Dropdown$1,exports.ErrorCard=ErrorCard$1,exports.FormField=FormField$1,exports.SaveCancelButtons=SaveCancelButtons$1,exports.ReportTable=ReportTable$1,exports.ExportButton=ExportButton$1,exports.Loading=Loading,exports.MiniLoading=MiniLoading;
